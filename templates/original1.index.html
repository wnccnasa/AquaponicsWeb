{% extends "base.html"%}

{% block content %}

<div class="container">
    <h1>üöÄ WNCC STEM Club - Aquaponics System</h1>
    <p>The WNCC STEM Club meets every Thursday at 4 PM in Room C1.</p>
    <!-- Live Stream Card -->
    <div class="card">
        <div class="card-header">
            <h3>üêü Live Fish Cam</h3>
        </div>
        <div class="card-body">
            <p>Live stream from the WNCC STEM Club Aquaponics system located in the WNCC Biology Lab. Check out the fish
                and plants thriving in our aquaponics setup!
            </p>

            <div class="text-center">
                <div id="stream-container" class="stream-container">
                    <div id="stream-loading" class="stream-loading">
                        <div class="spinner"></div>
                        <p>Connecting to live stream...</p>
                    </div>
                    <img id="stream" class="stream-video" src="{{ stream_url }}" alt="Fish Cam Live Stream">
                    <div id="stream-error" class="stream-error" style="display: none;">
                        <p>‚ö†Ô∏è Stream temporarily unavailable</p>
                        <button id="retry-stream" class="btn btn-outline-light btn-sm">Retry Connection</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Quick Links Card -->
    <div class="card">
        <div class="card-header">
            <h3>üìä System Monitoring</h3>
        </div>
        <div class="card-body">
            <p>Monitor the health and status of our aquaponics system through real-time sensor data.</p>
            <div class="text-center">
                <a href="{{ url_for('sensors') }}" class="btn btn-primary btn-lg">
                    View Sensor Dashboard
                </a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Pass the stream URL to JavaScript
    window.streamUrl = "{{ url_for('stream_proxy', host=host, port=port, path=path) }}";
</script>
<script src="{{ url_for('static', filename='js/stream.js') }}"></script>
{% endblock %}